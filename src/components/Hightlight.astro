---
interface Props {
    highlight?: string | boolean;
    title?: string;
    class?: string;
}

const { highlight, title, class: className } = Astro.props;

const highlightPresets: Record<string, string> = {
    blue: "bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300 px-1.5 py-0.5 rounded-md inline-block",
    green: "bg-emerald-100 dark:bg-emerald-900/40 text-emerald-700 dark:text-emerald-300 px-1.5 py-0.5 rounded-md inline-block",
    amber: "bg-amber-100 dark:bg-amber-900/40 text-amber-700 dark:text-amber-300 px-1.5 py-0.5 rounded-md inline-block",
    red: "bg-rose-100 dark:bg-rose-900/40 text-rose-700 dark:text-rose-300 px-1.5 py-0.5 rounded-md inline-block",
    purple: "bg-purple-100 dark:bg-purple-900/40 text-purple-700 dark:text-purple-300 px-1.5 py-0.5 rounded-md inline-block",
    sky: "bg-sky-100 dark:bg-sky-900/40 text-sky-700 dark:text-sky-300 px-1.5 py-0.5 rounded-md inline-block",
    slate: "bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 px-1.5 py-0.5 rounded-md inline-block",
    yellow: "bg-yellow-200 dark:bg-yellow-900/40 text-yellow-900 dark:text-yellow-200 px-1.5 py-0.5 rounded-md inline-block",
};

let highlightClass = "";
const customStyle: Record<string, string> = {};

if (highlight) {
    if (typeof highlight === "string") {
        if (highlightPresets[highlight]) {
            highlightClass = highlightPresets[highlight];
        } else if (highlight.startsWith("#") || highlight.startsWith("rgb")) {
            customStyle.backgroundColor = highlight;
            highlightClass = "px-1.5 py-0.5 rounded-md inline-block";
        } else {
            if (/^[a-zA-Z0-9-]+$/.test(highlight)) {
                highlightClass = highlight.includes("-")
                    ? highlight
                    : `bg-${highlight}`;
                highlightClass += " px-1.5 py-0.5 rounded-md inline-block";
            }
        }
    } else {
        highlightClass = highlightPresets.yellow;
    }
} else {
    highlightClass = highlightPresets.yellow;
}

const computedClass = [highlightClass, className].filter(Boolean).join(" ");
---

<span class={computedClass} style={customStyle} title={title}>
    <slot />
</span>
